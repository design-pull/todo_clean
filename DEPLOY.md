# Render.com デプロイガイド

このドキュメントは、Spring Boot TODO アプリケーションを Render.com にデプロイする手順を説明します。

## 前提条件

- GitHub アカウント
- Render.com アカウント
- プロジェクトが GitHub リポジトリにプッシュされている

## デプロイ手順

### 1. Render.com での設定

1. [Render.com](https://render.com)にログイン
2. ダッシュボードで「New +」をクリック
3. 「Web Service」を選択
4. 「Build and deploy from a Git repository」を選択
5. GitHub リポジトリを接続・選択

### 2. サービス設定

以下の設定を行います：

- **Name**: `todo-demo` (または任意の名前)
- **Runtime**: `Docker`
- **Instance Type**: `Free` (無料プラン使用時)
- **Auto-Deploy**: `No` (手動デプロイ)

### 3. 環境変数の設定

以下の環境変数を設定します：

| 変数名                   | 値     | 説明                                    |
| ------------------------ | ------ | --------------------------------------- |
| `SPRING_PROFILES_ACTIVE` | `prod` | プロダクションプロファイルを有効化      |
| `PORT`                   | `8080` | アプリケーションポート (通常は自動設定) |

### 4. デプロイの実行

1. 「Create Web Service」をクリック
2. 初回ビルドが開始されます（5-10 分程度）
3. ビルド完了後、アプリケーションが自動起動

## デプロイ後の確認

### アクセス確認

デプロイ完了後、以下の URL でアプリケーションにアクセスできます：

```
https://[サービス名].onrender.com
```

### ログの確認

Render.com のダッシュボードで以下を確認できます：

- デプロイログ
- アプリケーションログ
- リソース使用状況

## 手動デプロイ

コードを更新した場合は、Render.com のダッシュボードから手動でデプロイを実行します：

1. Render.com のダッシュボードにアクセス
2. 対象のサービスを選択
3. 「Manual Deploy」ボタンをクリック
4. 「Deploy latest commit」を選択してデプロイを実行

## トラブルシューティング

### よくある問題と解決方法

#### 1. ビルドエラー

- **原因**: Dockerfile の設定ミスまたは依存関係の問題
- **解決**: ビルドログを確認し、エラーメッセージに従って修正

#### 2. アプリケーションが起動しない

- **原因**: ポート設定またはプロファイル設定の問題
- **解決**: 環境変数の設定を確認

#### 3. 初回起動が遅い

- **原因**: 無料プランでの制限
- **解決**: 正常な動作です。初回は時間がかかります

### ログの確認方法

```bash
# Render CLIを使用してログを確認
render logs -s [サービスID]
```

## パフォーマンス最適化

### 無料プランの制限

- 15 分間非アクティブでスリープモードに移行
- 月間 750 時間の稼働時間制限
- CPU・メモリの制限

### 最適化のヒント

1. **キャッシュの活用**: Thymeleaf テンプレートキャッシュを有効化
2. **圧縮の有効化**: gzip 圧縮でレスポンスサイズを削減
3. **ログレベルの調整**: 本番環境では適切なログレベルを設定

## セキュリティ考慮事項

- HTTPS 通信が自動的に有効化
- セキュアクッキーの設定を有効化
- 機密情報は環境変数で管理

## サポート

- [Render.com Documentation](https://render.com/docs)
- [Spring Boot on Render Guide](https://render.com/docs/spring-boot)
- [Community Forum](https://community.render.com)
